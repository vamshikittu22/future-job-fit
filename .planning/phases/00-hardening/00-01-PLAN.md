---
phase: 00-hardening
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tsconfig.strict.json
  - tsconfig.json
  - src/shared/types/*.ts
  - src/shared/contexts/*.tsx
  - src/shared/lib/**/*.ts
autonomous: true

must_haves:
  truths:
    - "strict": true enabled in main tsconfig.json
    - npx tsc --noEmit passes with zero errors
    - src/shared/types, contexts, lib have zero TypeScript errors
    - Every explicit "any" has documented justification
    - Lint errors reduced to <10
  artifacts:
    - path: "tsconfig.strict.json"
      provides: "Validation config for strict mode migration"
    - path: "tsconfig.json"
      provides: "Main TypeScript config with strict mode enabled"
  key_links:
    - from: "tsconfig.json"
      to: "Build system"
      via: "tsc compiler"
---

<objective>
Enable TypeScript strict mode with zero-error policy for critical paths. NO silent exclusions allowed.

Purpose: Foundation for ATS engine complexity requires absolute type safety. Hidden type errors will explode in complexity during ATS Simulation 2.0.
Output: Strict mode enabled, shared directory error-free, all "any" types documented.
</objective>

<execution_context>
@C:/Users/kittu/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@tsconfig.json

## Current State
- TypeScript strict mode: Disabled (noImplicitAny: false)
- ESLint errors: 68+ across 18 files
- ResumeContext.tsx has implicit any errors (lines 134, 145)

## Strategy (REVISED - NO EXCLUSIONS)
1. Create tsconfig.strict.json for validation
2. Fix ALL errors in shared/ directory (zero tolerance)
3. Fix remaining errors with documented "any" only
4. Enable strict mode in main tsconfig.json
5. Verify: npx tsc --noEmit passes

## Any-Type Policy
Every explicit "any" MUST have:
```typescript
// eslint-disable-next-line @typescript-eslint/no-explicit-any
// JUSTIFIED: [reason - e.g., "third-party API shape unknown"]
```
No undocumented "any" allowed.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Strict Validation Config</name>
  <files>tsconfig.strict.json</files>
  <action>
    Create tsconfig.strict.json for validation BEFORE touching main config:

    ```json
    {
      "extends": "./tsconfig.json",
      "compilerOptions": {
        "strict": true,
        "noImplicitAny": true,
        "strictNullChecks": true,
        "strictFunctionTypes": true,
        "noUnusedLocals": true,
        "noUnusedParameters": true
      }
    }
    ```

    Run validation to see error count:
    ```bash
    npx tsc -p tsconfig.strict.json --noEmit
    ```

    Document error count per directory:
    - src/shared/types: __ errors
    - src/shared/contexts: __ errors  
    - src/shared/lib: __ errors
    - src/features: __ errors
    - Other: __ errors

    DO NOT proceed to Task 2 until error inventory complete.
  </action>
  <verify>
    1. tsconfig.strict.json exists and extends main config
    2. Validation command runs without crashing
    3. Error inventory documented
  </verify>
  <done>
    Strict validation config created. Error inventory documented.
    Ready to fix shared directory errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Zero-Error Shared Directory</name>
  <files>
    src/shared/types/resume.ts
    src/shared/types/job.ts
    src/shared/types/coverLetter.ts
    src/shared/contexts/ResumeContext.tsx
    src/shared/contexts/JobContext.tsx
    src/shared/lib/**/*.ts
  </files>
  <action>
    Fix ALL TypeScript errors in shared directory. ZERO tolerance.

    Priority fixes:
    1. ResumeContext.tsx lines 134, 145:
       - Error: Element implicitly has 'any' type
       - Skills object indexing issue
       
       Fix pattern:
       ```typescript
       // BEFORE (error)
       skills[category].forEach(...)
       
       // AFTER (fixed)
       function isSkillCategory(obj: unknown, key: string): obj is Record<string, string[]> {
         return typeof obj === 'object' && obj !== null && key in obj;
       }
       
       if (isSkillCategory(skills, category)) {
         skills[category].forEach(...)
       }
       ```

    2. Add explicit return types to all exported functions:
       ```typescript
       // BEFORE
       export function formatDate(date) { ... }
       
       // AFTER
       export function formatDate(date: Date): string { ... }
       ```

    3. Fix implicit any in callbacks:
       ```typescript
       // BEFORE
       array.map((item) => ...)
       
       // AFTER  
       array.map((item: ItemType) => ...)
       ```

    4. Run validation after each file:
       ```bash
       npx tsc -p tsconfig.strict.json --noEmit
       ```

    Target: ZERO errors in src/shared/
  </action>
  <verify>
    1. Run: npx tsc -p tsconfig.strict.json --noEmit
    2. Verify: 0 errors in src/shared/types
    3. Verify: 0 errors in src/shared/contexts
    4. Verify: 0 errors in src/shared/lib
  </verify>
  <done>
    Shared directory has ZERO TypeScript errors.
    Strict validation passes for shared/.
  </done>
</task>

<task type="auto">
  <name>Task 3: Fix Remaining Errors with Documented Any</name>
  <files>
    src/features/**/*.tsx
    src/app/**/*.tsx
  </files>
  <action>
    Fix remaining TypeScript errors outside shared directory.

    Rules:
    1. Fix all errors that can be typed properly
    2. For genuine unknowns (third-party APIs), use DOCUMENTED any:
       ```typescript
       // eslint-disable-next-line @typescript-eslint/no-explicit-any
       // JUSTIFIED: Third-party API response shape not documented
       type ApiResponse = any;
       ```
    
    3. Pattern for event handlers:
       ```typescript
       const handleClick = (event: React.MouseEvent<HTMLButtonElement>): void => {
         // implementation
       };
       ```

    4. Pattern for useRef:
       ```typescript
       const inputRef = useRef<HTMLInputElement>(null);
       ```

    5. Track remaining errors per file
    6. Document any "any" usage in code comments

    Target: <10 remaining errors (all documented)
  </action>
  <verify>
    1. Run: npx tsc -p tsconfig.strict.json --noEmit
    2. Count total errors: should be <10
    3. Verify every "any" has JUSTIFIED comment
  </verify>
  <done>
    Remaining errors <10, all documented.
    Ready to enable strict mode in main config.
  </done>
</task>

<task type="auto">
  <name>Task 4: Enable Strict Mode in Main Config</name>
  <files>tsconfig.json</files>
  <action>
    ONLY run this after Task 3 verification passes.

    Update main tsconfig.json:
    ```json
    {
      "compilerOptions": {
        // ... existing options ...
        "strict": true,
        "noImplicitAny": true,
        "strictNullChecks": true,
        "strictFunctionTypes": true,
        "noUnusedLocals": true,
        "noUnusedParameters": true
      }
    }
    ```

    NO "exclude" array to hide errors. Everything must pass.

    Final verification:
    ```bash
    npx tsc --noEmit
    ```

    Must return: 0 errors
  </action>
  <verify>
    1. tsconfig.json has strict: true
    2. No exclude array hiding errors
    3. npx tsc --noEmit returns 0 errors
  </verify>
  <done>
    Strict mode enabled in main tsconfig.json.
    TypeScript compilation passes with zero errors.
  </done>
</task>

<task type="auto">
  <name>Task 5: Lint Cleanup and Enforcement</name>
  <files>
    package.json
    .eslintrc.cjs
  </files>
  <action>
    Clean lint errors and enforce quality gates:

    1. Run lint and fix:
       ```bash
       npm run lint -- --fix
       ```

    2. Manually fix remaining:
       - Unused vars (prefix with _ or remove)
       - Console statements (use logger or remove)
       - Missing useEffect deps

    3. Update package.json scripts:
       ```json
       {
         "scripts": {
           "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 10",
           "lint:check": "eslint . --ext ts,tsx --max-warnings 0",
           "typecheck": "tsc --noEmit"
         }
       }
       ```

    4. Target: npm run lint returns <10 warnings

    5. Document any unfixable legacy errors in:
       .planning/phases/00-hardening/00-01-LEGACY-ERRORS.md
  </action>
  <verify>
    1. npm run lint returns <10 warnings
    2. npm run typecheck passes
    3. npm run build succeeds
  </verify>
  <done>
    Lint errors <10. Quality gates enforced.
    Strict mode hardening complete.
  </done>
</task>

</tasks>

<verification>
1. npx tsc --noEmit passes (zero errors)
2. src/shared/ has zero TypeScript errors
3. Every "any" type has JUSTIFIED comment
4. npm run lint returns <10 warnings
5. npm run build succeeds
6. No silent excludes in tsconfig
</verification>

<success_criteria>
- "strict": true enabled in tsconfig.json
- Zero errors: npx tsc --noEmit
- Shared directory error-free
- All "any" types documented
- Lint <10 warnings
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/00-hardening/00-01-SUMMARY.md`
</output>
