---
phase: 01-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: 
  - src/features/cover-letter/types.ts
  - src/features/interview-prep/types.ts
  - src/features/linkedin-sync/types.ts
  - src/features/template-marketplace/types.ts
  - src/shared/types/index.ts
autonomous: true

must_haves:
  truths:
    - "TypeScript types exist for all v1 features: CoverLetter, InterviewQuestion, InterviewSession, LinkedInProfile, LinkedInOAuthResponse, Template"
    - "Types are co-located with features in src/features/*/types.ts"
    - "Zod schemas provide runtime validation for all types"
    - "Shared base types use hybrid approach with feature-specific extensions"
    - "Types can be imported from centralized index or directly from feature"
  artifacts:
    - path: "src/features/cover-letter/types.ts"
      provides: "CoverLetter types with Zod schemas"
      exports: ["CoverLetter", "CoverLetterVariant", "CoverLetterPromptAnswers", "coverLetterSchema"]
    - path: "src/features/interview-prep/types.ts"
      provides: "Interview types with Zod schemas"
      exports: ["InterviewQuestion", "InterviewSession", "InterviewAnswer", "InterviewFeedback", "interviewQuestionSchema", "interviewSessionSchema"]
    - path: "src/features/linkedin-sync/types.ts"
      provides: "LinkedIn types with Zod schemas"
      exports: ["LinkedInProfile", "LinkedInOAuthResponse", "LinkedInConnectionState", "linkedInProfileSchema", "linkedInOAuthResponseSchema"]
    - path: "src/features/template-marketplace/types.ts"
      provides: "Template marketplace types with Zod schemas"
      exports: ["Template", "TemplateCategory", "TemplateMetadata", "templateSchema"]
    - path: "src/shared/types/index.ts"
      provides: "Centralized type exports"
      exports: ["Re-export of all feature types"]
  key_links:
    - from: "src/shared/types/index.ts"
      to: "src/features/*/types.ts"
      via: "re-exports"
      pattern: "export.*from.*features/"
    - from: "feature types"
      to: "Zod schemas"
      via: "z.object() definitions"
      pattern: "z\\.object\\("
---

<objective>
Create comprehensive TypeScript types with Zod validation schemas for all v1 features (Cover Letter, Interview Prep, LinkedIn Sync, Template Marketplace).

Purpose: Establish type safety and runtime validation for all new features, enabling confident development of downstream phases. Types follow the hybrid approach with shared bases and feature-specific extensions.
Output: Feature-co-located type files with Zod schemas, plus centralized exports for convenient importing.
</objective>

<execution_context>
@C:/Users/kittu/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/kittu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Reference existing type patterns
@src/shared/types/resume.ts
@src/shared/types/ats.ts

# User decisions
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Cover Letter Types with Zod Schemas</name>
  <files>src/features/cover-letter/types.ts</files>
  <action>
    Create comprehensive types for Cover Letter feature with Zod runtime validation.

    Types to define:
    
    1. CoverLetterPromptAnswers (per user decision - guided prompting with 2-3 questions):
       - z.object with:
         - whyThisCompany: string (why interested in this specific company)
         - keyStrengths: string[] (top 2-3 strengths relevant to role)
         - uniqueAngle?: string (optional differentiator story)
    
    2. CoverLetterVariant (one of 3 generated variants):
       - id: string
       - content: string (the actual cover letter text)
       - tone: 'formal' | 'conversational' | 'enthusiastic'
       - atsScore?: number
       - createdAt: string
    
    3. CoverLetter (main type, per user decision - version history):
       - id: string
       - jobId: string (links to JobContext job)
       - resumeSnapshotId: string (links to resume version used)
       - promptAnswers: CoverLetterPromptAnswers
       - variants: CoverLetterVariant[]
       - selectedVariantId?: string (user's chosen variant)
       - editedContent?: string (if user edited the selected variant)
       - status: 'draft' | 'generated' | 'edited' | 'finalized'
       - atsScore?: number
       - keywordsUsed: string[] (keywords from job description incorporated)
       - metadata: { createdAt, updatedAt, generatedAt? }
    
    4. Zod Schemas:
       - coverLetterPromptAnswersSchema: z.infer type for CoverLetterPromptAnswers
       - coverLetterVariantSchema: z.infer type for CoverLetterVariant
       - coverLetterSchema: z.infer type for CoverLetter
    
    Export all types and schemas. Add JSDoc comments explaining business logic (e.g., "whyThisCompany: User's answer to why they're interested in this specific company").
    
    Import z from 'zod' at the top of the file.
  </action>
  <verify>
    1. Run `npm run lint src/features/cover-letter/types.ts` - no TypeScript errors
    2. Verify Zod schemas export: grep -E "export.*Schema" src/features/cover-letter/types.ts
  </verify>
  <done>File exists with all CoverLetter types, Zod schemas, proper exports, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Create Interview Prep Types with Zod Schemas</name>
  <files>src/features/interview-prep/types.ts</files>
  <action>
    Create comprehensive types for Interview Preparation feature with Zod validation.

    Types to define:
    
    1. InterviewQuestion (per user decision - categorized questions):
       - id: string
       - question: string (the question text)
       - category: 'behavioral' | 'technical' | 'situational' | 'company_specific'
       - difficulty: 'easy' | 'medium' | 'hard'
       - expectedFocus: string[] (keywords/concepts answer should address)
       - timeEstimateMinutes: number
       - sourceContext?: string (e.g., "Generated from job requirement: ...")
       - jobId: string (links to job this question relates to)
    
    2. InterviewAnswer (user's answer to a question):
       - id: string
       - questionId: string
       - content: string (the answer text)
       - wordCount: number (auto-calculated)
       - fillerWordCount: number (auto-calculated from analysis)
       - estimatedDurationMinutes: number (calculated from word count)
       - submittedAt: string
       - practiceSessionId?: string
    
    3. InterviewFeedback (per user decision - STAR methodology framework):
       - id: string
       - answerId: string
       - starScores: {
           situation: number (0-10)
           task: number (0-10)
           action: number (0-10)
           result: number (0-10)
         }
       - overallScore: number (0-100)
       - strengths: string[]
       - improvements: string[]
       - fillerWords: { word: string; count: number }[]
       - generatedAt: string
    
    4. InterviewSession (per user decision - practice mode with timer):
       - id: string
       - jobId: string
       - durationMinutes: number (5, 10, or 15)
       - questionIds: string[] (questions in this session)
       - currentQuestionIndex: number
       - answers: InterviewAnswer[]
       - status: 'in_progress' | 'completed' | 'paused'
       - startedAt: string
       - completedAt?: string
    
    5. Zod Schemas:
       - interviewQuestionSchema
       - interviewAnswerSchema
       - interviewFeedbackSchema
       - interviewSessionSchema
    
    Export all types and schemas with proper JSDoc comments.
  </action>
  <verify>
    1. Run `npm run lint src/features/interview-prep/types.ts` - no TypeScript errors
    2. Verify Zod schemas export
  </verify>
  <done>File exists with all Interview types, Zod schemas, proper exports, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 3: Create LinkedIn Sync Types with Zod Schemas</name>
  <files>src/features/linkedin-sync/types.ts</files>
  <action>
    Create types for LinkedIn Profile Sync feature with Zod validation (per user decision - OAuth 2.0 + PKCE, tokens in memory only).

    Types to define:
    
    1. LinkedInOAuthResponse (token response from LinkedIn):
       - access_token: string
       - expires_in: number (seconds)
       - scope: string
       - token_type: 'Bearer'
       - id_token?: string (if OpenID scope requested)
    
    2. LinkedInBasicProfile (data available without partner program - per research):
       - id: string (LinkedIn member ID)
       - firstName: string
       - lastName: string
       - headline?: string
       - profilePictureUrl?: string
       - vanityName?: string (custom URL slug)
    
    3. LinkedInProfile (full profile with mapping to resume fields):
       - basic: LinkedInBasicProfile
       - email?: string
       - mappedFields: {
           personal: {
             name: boolean
             title: boolean (from headline)
             email: boolean
           }
           experience: { imported: number; total: number }
           education: { imported: number; total: number }
           skills: { imported: number; total: number }
         }
       - rawData: Record<string, any> (complete raw response for debugging)
    
    4. LinkedInConnectionState (per user decision - tokens in memory only):
       - isConnected: boolean
       - connectedAt?: string
       - expiresAt?: string (token expiration)
       - scopes: string[]
       - profile?: LinkedInBasicProfile (cached basic info)
    
    5. LinkedInImportResult (result of import operation):
       - success: boolean
       - importedFields: string[] (which fields were imported)
       - skippedFields: string[] (which fields were skipped)
       - errors: string[] (any errors during import)
       - requiresManualReview: string[] (fields that need user confirmation)
    
    6. Zod Schemas:
       - linkedInOAuthResponseSchema
       - linkedInBasicProfileSchema
       - linkedInProfileSchema
       - linkedInConnectionStateSchema
       - linkedInImportResultSchema
    
    Export all types and schemas. Add comments noting LinkedIn API limitations (basic profile only without partner program).
  </action>
  <verify>
    1. Run `npm run lint src/features/linkedin-sync/types.ts` - no TypeScript errors
    2. Verify Zod schemas export
  </verify>
  <done>File exists with all LinkedIn types, Zod schemas, proper exports, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 4: Create Template Marketplace Types with Zod Schemas</name>
  <files>src/features/template-marketplace/types.ts</files>
  <action>
    Create types for Template Marketplace feature with Zod validation (per user decision - 50+ team-created templates at launch).

    Types to define:
    
    1. TemplateCategory (per user decision - categorized by industry and style):
       - industry: 'tech' | 'healthcare' | 'finance' | 'marketing' | 'education' | 'general' | 'creative'
       - style: 'modern' | 'professional' | 'minimal' | 'creative' | 'academic'
    
    2. TemplateAuthor:
       - name: string
       - title?: string
       - avatarUrl?: string
    
    3. TemplateATSCertification (per user decision - ATS certification badge):
       - score: number (0-100)
       - certifiedAt: string
       - testVersion: string
       - issues: string[] (any ATS compatibility issues found)
    
    4. Template (per user decision - metadata includes author, ATS score, usage count):
       - id: string
       - name: string
       - description: string
       - thumbnailUrl: string
       - category: TemplateCategory
       - author: TemplateAuthor
       - atsCertification: TemplateATSCertification
       - downloadCount: number
       - rating: { average: number; count: number }
       - createdAt: string
       - updatedAt: string
       - tags: string[]
       - previewData?: ResumeData (sample data for preview)
       - isFeatured: boolean
       - isNew: boolean
    
    5. TemplateFilters (for search/filter functionality):
       - searchQuery?: string
       - industries: TemplateCategory['industry'][]
       - styles: TemplateCategory['style'][]
       - atsCertifiedOnly: boolean
       - sortBy: 'popular' | 'newest' | 'rating' | 'ats_score'
    
    6. Zod Schemas:
       - templateCategorySchema
       - templateAuthorSchema
       - templateATSCertificationSchema
       - templateSchema
       - templateFiltersSchema
    
    Export all types and schemas. Note: Template marketplace will use existing ResumeData type for preview functionality.
  </action>
  <verify>
    1. Run `npm run lint src/features/template-marketplace/types.ts` - no TypeScript errors
    2. Verify Zod schemas export
  </verify>
  <done>File exists with all Template types, Zod schemas, proper exports, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 5: Create Centralized Type Index</name>
  <files>src/shared/types/index.ts</files>
  <action>
    Create centralized type exports for convenient importing.

    The file should re-export all types from feature type files:

    ```typescript
    // Re-export feature types
    export * from '@/features/cover-letter/types';
    export * from '@/features/interview-prep/types';
    export * from '@/features/linkedin-sync/types';
    export * from '@/features/template-marketplace/types';

    // Re-export existing shared types for convenience
    export * from './resume';
    export * from './ats';
    export * from './job';  // Will be created in Plan 01
    ```

    This allows developers to import any type from a single location:
    `import { CoverLetter, InterviewQuestion, LinkedInProfile } from '@/shared/types';`

    OR import directly from features:
    `import { CoverLetter } from '@/features/cover-letter/types';`

    If the file already exists, append the new exports while preserving existing ones.
  </action>
  <verify>
    1. Run `npm run lint src/shared/types/index.ts` - no TypeScript errors
    2. Verify all re-exports work: grep -E "export.*from" src/shared/types/index.ts | wc -l >= 6
  </verify>
  <done>Centralized type index exists with re-exports from all feature type files, no TypeScript errors</done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes: `npm run build` completes without errors
2. All types can be imported: `import { CoverLetter, InterviewQuestion, LinkedInProfile, Template } from '@/shared/types'`
3. Zod schemas validate correctly: `coverLetterSchema.parse(data)` works
4. No `any` types used in type definitions
</verification>

<success_criteria>
- All v1 feature types defined with strict TypeScript
- Zod schemas provide runtime validation for all types
- Types are co-located in src/features/*/types.ts
- Centralized exports available from src/shared/types/index.ts
- Types match user decisions (guided prompting for Cover Letter, STAR framework for Interview, etc.)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
